{% load i18n %}

{% block content %}
{% block container %}
{% comment %} <h3>Client List</h3> {% endcomment %}
{% if clients %}
<div class="table_detail_rows">
    <table class="table">
        <tr>
            <th scope="col">Name
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path
                        d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
                </svg>
            </th>
            {%if user.is_superuser %}
            <th scope="col">Email</th>
            {% endif %}
            {%if user.is_administrator %}
            <th scope="col">Advisor</th>
            {% endif %}
            <th scope="col">Email <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path
                        d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
                </svg></th>
            <th scope="col">Cellphone </th>
            <th scope="col">Location</th>
            <th scope="col">Last Contact</th>
            <th scope="col">Status</th>
        </tr>

        {% for client in clients %}

        <tr scope="row" data-href="{% url 'clients:client-summary' pk=client.id %}">

            <td>
                <a href="{% url 'clients:client-summary' pk=client.id %}">{{ client.names }}
                    {{ client.surnames }}
                </a>
            </td>
            <td> <a href="{% url 'clients:client-summary' pk=client.id %}">{{ client.client_contact_fk.email_address }}
                </a>
            </td>
            <td> 
                <a href="{% url 'clients:client-summary' pk=client.id %}">{{ client.client_contact_fk.cellphone_number }}
                </a>
            </td>
            <td> 
                <a href="{% url 'clients:client-summary' pk=client.id %}">{{ client.client_contact_fk.residential_address_line_1 }}
                </a>
            </td>
            <td> 
                <a href="{% url 'clients:client-summary' pk=client.id %}">{{ client.client_employment_fk.employment_date | date:"SHORT_DATE_FORMAT" }}
                    <i class="fa fa-refresh update-last-contact" aria-hidden="true">
                        <span>
                            UPDATE
                        </span>
                    </i>
                </a>
            </td>
            <td> 
                <a class="client-contact-overdue" href="{% url 'clients:client-summary' pk=client.id %}">Overdue
                </a>
            </td>
            {% if user.is_superuser %}
            <td>{{ client.advisor_id_fk.practise_id_fk}}</td>
            <td>{{ client.advisor_id_fk}}</td>
            {% endif %}
            {%if user.is_administrator %}
            <td>{{client.employment_date}}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
</div>
{% else %}
<p>No Clients to Display</p>
{% endif %}
{% endblock %}
{% endblock %}
